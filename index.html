<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find skateboard shops near you. Search by address or use your location to discover local and chain skateshops. USA only.">
    <title>Find Skate Shops</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6RRXJT4DE3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    </script>
</head>
<body>
    <header>
        <h1>Find Skate Shops</h1>
        <p class="tagline">Discover skateboard shops near you</p>
    </header>

    <main>
        <section class="search-section">
            <form id="search-form" class="search-form">
                <div class="input-group">
                    <label for="address-input" class="visually-hidden">Enter your address</label>
                    <input
                        type="text"
                        id="address-input"
                        name="address"
                        placeholder="Enter your address (city, state or ZIP)"
                        autocomplete="street-address"
                    >
                    <button type="submit" id="search-btn">Search</button>
                </div>
                <div class="location-option">
                    <span class="divider">or</span>
                    <button type="button" id="geolocation-btn" class="geolocation-btn">
                        <svg class="icon" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                            <path fill="currentColor" d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
                        </svg>
                        Use my location
                    </button>
                </div>
            </form>

            <div id="error-message" class="error-message" role="alert" hidden></div>
            <div id="loading-indicator" class="loading-indicator" hidden>
                <span class="spinner"></span>
                <span>Finding nearby shops...</span>
            </div>
        </section>

        <section id="results-section" class="results-section" hidden>
            <div class="results-header">
                <h2>Nearby Skateshops</h2>
                <p id="results-summary" class="results-summary"></p>
            </div>
            <div class="view-toggle" role="tablist" aria-label="View options">
                <button type="button" id="list-view-btn" class="view-toggle-btn active" role="tab" aria-selected="true" aria-controls="results-list">List</button>
                <button type="button" id="map-view-btn" class="view-toggle-btn" role="tab" aria-selected="false" aria-controls="results-map">Map</button>
            </div>
            <ul id="results-list" class="results-list" role="tabpanel"></ul>
            <div id="results-map" class="results-map" role="tabpanel" hidden></div>
        </section>

        <section id="no-results" class="no-results" hidden>
            <h2>No Shops Found</h2>
            <p>We couldn't find any skateshops within 100 miles of your location.</p>
            <p>Know a shop we're missing? <button type="button" class="link-btn" data-modal="suggest-modal">Suggest a shop</button></p>
        </section>
    </main>

    <footer>
        <p>Data last updated: <span id="last-updated">--</span></p>
        <nav class="footer-links">
            <button type="button" class="footer-link-btn" data-modal="suggest-modal">Suggest a Shop</button>
            <button type="button" class="footer-link-btn" data-modal="report-modal">Report Closed Shop</button>
            <a href="privacy.html">Privacy Policy</a>
            <a href="https://github.com/cberes/findskateshops">Github</a>
        </nav>
    </footer>

    <!-- Suggest a Shop Modal -->
    <div id="suggest-modal" class="modal" hidden>
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Suggest a Shop</h2>
                <button type="button" class="modal-close" aria-label="Close">&times;</button>
            </div>
            <form id="suggest-form" class="feedback-form" action="https://formspree.io/f/xnjdnogo" method="POST">
                <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

                <div class="form-group">
                    <label for="suggest-name">Shop Name <span class="required">*</span></label>
                    <input type="text" id="suggest-name" name="shop_name" required>
                </div>

                <div class="form-group">
                    <label for="suggest-address">Address <span class="required">*</span></label>
                    <input type="text" id="suggest-address" name="address" placeholder="Street, City, State ZIP" required>
                </div>

                <div class="form-group">
                    <label for="suggest-website">Website</label>
                    <input type="url" id="suggest-website" name="website" placeholder="https://example.com">
                </div>

                <div class="form-group">
                    <label for="suggest-phone">Phone</label>
                    <input type="tel" id="suggest-phone" name="phone" placeholder="(555) 123-4567">
                </div>

                <div class="form-group">
                    <label>Shop Type <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="shop_type" value="independent" required checked>
                            <span>Independent</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="shop_type" value="chain">
                            <span>Chain Store</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="suggest-email">Your Email (optional)</label>
                    <input type="email" id="suggest-email" name="email" placeholder="For follow-up questions">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary modal-cancel">Cancel</button>
                    <button type="submit" class="btn-primary">Submit</button>
                </div>
            </form>
            <div id="suggest-success" class="form-success" hidden>
                <p>Thank you for your suggestion! We'll review it soon.</p>
                <button type="button" class="btn-primary modal-close">Close</button>
            </div>
        </div>
    </div>

    <!-- Report Closed Shop Modal -->
    <div id="report-modal" class="modal" hidden>
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Report a Closed Shop</h2>
                <button type="button" class="modal-close" aria-label="Close">&times;</button>
            </div>
            <form id="report-form" class="feedback-form" action="https://formspree.io/f/xdagkpwb" method="POST">
                <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

                <div class="form-group">
                    <label for="report-shop">Select Shop <span class="required">*</span></label>
                    <input type="text" id="report-shop-search" class="shop-search" placeholder="Type to search shops...">
                    <select id="report-shop" name="shop" required>
                        <option value="">-- Select a shop --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="report-comment">Additional Comments</label>
                    <textarea id="report-comment" name="comment" rows="3" placeholder="Any details about the closure (optional)"></textarea>
                </div>

                <div class="form-group">
                    <label for="report-email">Your Email (optional)</label>
                    <input type="email" id="report-email" name="email" placeholder="For follow-up questions">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary modal-cancel">Cancel</button>
                    <button type="submit" class="btn-primary">Submit Report</button>
                </div>
            </form>
            <div id="report-success" class="form-success" hidden>
                <p>Thank you for your report! We'll verify this information.</p>
                <button type="button" class="btn-primary modal-close">Close</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script type="module" src="app.js"></script>
</body>
</html>
